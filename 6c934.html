<!DOCTYPE html>
<html class="no-js">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Dynamically Load CSS To Speed Up Page Loads</title>
        <meta name="description" content="Will loading CSS via JavaScript or jQuery speed up page load times?">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Place favicon.ico and apple-touch-icon(s) in the root directory -->

        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/main.css">
        <style type="text/css">.table{border-collapse:collapse;border-spacing:0;empty-cells:show;border:1px solid #cbcbcb;margin:20px auto}.table td,.table th{border-left:1px solid #cbcbcb;border-width:0 0 0 1px;font-size:inherit;margin:0;overflow:visible;padding:6px 12px}.table td:first-child,.table th:first-child{border-left-width:0}.table thead{background:#e0e0e0;color:#000;text-align:left;vertical-align:bottom}.table td{background-color:transparent}</style>

    </head>
    <body>
        <!--[if lt IE 8]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

      <div class="wrapper">
          <div class="header">
            <h1 class="site-title"><a href="http://bmcculley.github.io" title="home">B McCulley</a></h1>
            
          </div><!-- header -->
          <article class="content">
<h2>Dynamically Load CSS To Speed Up Page Loads</h2>
<p>Earlier today I had this crazy idea of loading up CSS after the HTML to help increase page load times. I had the idea sometime ago actually, it actually came about after I pointed my browser at blekko. I'm not really sure whether they do it on purpose or not but their CSS loads a split second after the HTML loads. It repeatedly does this which leads me to believe that it's done on purpose. Anyway, I decided to give it a shot and see if it did in fact help out with page load times.</p>
<p>After some brief and not so scientific testing, it was clear that dynamically loading CSS was much faster. For testing I used the network page load tester located in the Firefox web console.</p>
<p>The exact same page was used in both tests, with the way the CSS was being loaded the only difference. I used pure JavaScript for the first round of this test. In that test page size was cut practically in half and the load time didn't even register.</p>
<p>For a second round of testing, I decided that I would use jQuery. I wasn't quite sure what to expect, loading the jQuery library plus the script that would then add the CSS file to the head was a lot of extra overhead for such a small task. However, I started thinking that the browser would begin loading those scripts and move on to rendering the rest of the page which in theory could improve the overall load time.</p>
<p>Let's have a look at the results of the test.</p>
<table class="table">
				<thead>
					<tr>
						<th scope="col"></th>
						<th scope="col"># of Requests</th>
						<th scope="col">Page Size</th>
						<th scope="col">Time to load</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>CSS</td>
						<td>2</td>
						<td>11.95 KB</td>
						<td>0.06 s</td>
					</tr>
					<tr>
						<td>JavaScript</td>
						<td>1</td>
						<td>5.51 KB</td>
						<td>0.00 s</td>
					</tr>
					<tr>
						<td>jQuery</td>
						<td>4</td>
						<td>105.66 KB</td>
						<td>0.26 s</td>
					</tr>
				</tbody>
			</table>
<p>Unfortunately, I conducted this test on a local server so everything loaded up really quickly. This caused a bit of a problem as is displayed in the table above. We can definitely tell that the JavaScript method was the fastest when it came to loading the CSS file, but not exactly how much faster. In future tests like this, I believe that it would be best to use something that can measure time down to the ten thousandths place giving a better idea of where things stacked up. Another confusing piece of this test is the amount of fluctuation in the amount of time it took the same page to load. Each time I began the test with the cache cleared, and on all the pages the load time varied by up to five tenths of a second. In these tests I accounted for this by conducting 20 repeated tests and taking the average; this too could be improved upon by taking more tests and finding the average.</p>
<p><button class="btn btn-default" onclick="loadcss();">Demo</button></p>
</article><!-- content -->
        <footer class="footer">
            <div class="copy-link"><p>&copy; <a href="http://bmcculley.github.io" title="B McCulley">B McCulley</a> 2013</p></div>
            <div class="contact-link"><p>
                <a href="https://github.com/bmcculley" title="Find me on GitHub"><img src="img/github-64.png" style="margin-top:-21px;" height="50px" width="50px" alt="My GitHub"/></a>&nbsp;
                <a href="http://www.google.com/recaptcha/mailhide/d?k=01NcWfFkKCXl1mz-Nyg5zJ-w==&amp;c=2SM8GEmgqFCzmkkmq3vbh4qa_I4zoNRsTXDIq-bZcEE=" onclick="window.open('http://www.google.com/recaptcha/mailhide/d?k\07501NcWfFkKCXl1mz-Nyg5zJ-w\75\75\46c\0752SM8GEmgqFCzmkkmq3vbh4qa_I4zoNRsTXDIq-bZcEE\075', '', 'toolbar=0,scrollbars=0,location=0,statusbar=0,menubar=0,resizable=0,width=500,height=300'); return false;" title="Reveal this e-mail address"><img src="img/googlemail-64.png" alt="Contact Me"/></a></p></div>
        </footer><!-- footer -->
      </div><!-- wrapper -->
        <script type="text/javascript">
            function loadcss() {
                var filename = 'css/demo.css';
                
                var fileref=document.createElement("link")
                fileref.setAttribute("rel", "stylesheet")
                fileref.setAttribute("type", "text/css")
                fileref.setAttribute("href", filename)

                if (typeof fileref!="undefined")
                    document.getElementsByTagName("head")[0].appendChild(fileref)
                    scrollTo(document.documentElement, 0, 500);
            }

            function scrollTo(element, to, duration) {
                if (duration < 0) return;
                var difference = to - element.scrollTop;
                var perTick = difference / duration * 10;

                setTimeout(function() {
                    element.scrollTop = element.scrollTop + perTick;
                    if (element.scrollTop == to) return;
                    scrollTo(element, to, duration - 10);
                }, 10);
            }
        </script>
        <script>
    	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    	  ga('create', 'UA-47044243-1', 'bmcculley.github.io');
    	  ga('send', 'pageview');

  	   </script>
    </body>
</html>